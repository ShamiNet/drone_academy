# ูุธุงู ุงูุตูุงุญูุงุช - Drone Academy

## ุงูุฃุฏูุงุฑ (Roles)

### 1. Owner (ุงููุงูู) ๐
**ุงูุฏูุฑ ุงูุฃุนูู** - ุตูุงุญูุงุช ูุงููุฉ ูุญุตุฑูุฉ

**ุงูุตูุงุญูุงุช ุงูุญุตุฑูุฉ:**
- โ ุชุตุฏูุฑ ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ูููุงุนุฏุฉ
- โ ุญุธุฑ/ุฅูุบุงุก ุญุธุฑ ุงููุณุชุฎุฏููู
- โ ุฅุฏุงุฑุฉ ุฅุตุฏุงุฑ ุงูุชุทุจูู (Force Update)
- โ ุฅููุงู/ุชุดุบูู ุงูุชุทุจูู
- โ ุฅูุดุงุก ุงูุชูุงุฑูุฑ ุงูุดุงููุฉ
- โ ุงููุตูู ุฅูู ุตูุญุฉ ุงูุชุญูู ูู ุงูุชุทุจูู

**ุงูุตูุงุญูุงุช ุงููุดุชุฑูุฉ ูุน Admin:**
- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- ุฅุฏุงุฑุฉ ุงูุชุฏุฑูุจุงุช
- ุฅุฏุงุฑุฉ ุงููุณุงุจูุงุช
- ุนุฑุถ ุงูุชูุงุฑูุฑ

### 2. Admin (ูุฏูุฑ) ๐ด
**ุฏูุฑ ุฅุฏุงุฑู** - ุตูุงุญูุงุช ูุญุฏูุฏุฉ

**ุงูุตูุงุญูุงุช:**
- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (ุจุฏูู ุญุธุฑ)
- ุฅุฏุงุฑุฉ ุงูุชุฏุฑูุจุงุช
- ุฅุฏุงุฑุฉ ุงููุณุงุจูุงุช
- ุนุฑุถ ุงูุชูุงุฑูุฑ (ุจุฏูู ุงูุชูุฑูุฑ ุงูุดุงูู)
- ุนุฑุถ ุงููููู ุงูุชูุธููู

**ุงูููููุนุงุช:**
- โ ูุง ููููู ุญุธุฑ ุงููุณุชุฎุฏููู
- โ ูุง ููููู ุชุตุฏูุฑ ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ
- โ ูุง ููููู ุฅุฏุงุฑุฉ ุฅุตุฏุงุฑ ุงูุชุทุจูู
- โ ูุง ููููู ุฅููุงู/ุชุดุบูู ุงูุชุทุจูู
- โ ูุง ููููู ุฅูุดุงุก ุงูุชูุฑูุฑ ุงูุดุงูู

### 3. Trainer (ูุฏุฑุจ) ๐ต
- ุฅุถุงูุฉ ูุชุงุฆุฌ ุงูุชุฏุฑูุจ
- ุนุฑุถ ุงููุชุฏุฑุจูู
- ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช ุงูุชุฏุฑูุจูุฉ

### 4. Trainee (ูุชุฏุฑุจ) ๐ข
- ุนุฑุถ ุงูุชุฏุฑูุจุงุช ุงูุฎุงุตุฉ ุจู
- ุงููุดุงุฑูุฉ ูู ุงููุณุงุจูุงุช
- ุนุฑุถ ูุชุงุฆุฌู

---

## ููููุฉ ุชุนููู ุฃูู Owner

### ุงูุทุฑููุฉ 1: ูู Firebase Console (ููุตู ุจูุง) โญ

1. ุงูุชุญ [Firebase Console](https://console.firebase.google.com/)
2. ุงุฎุชุฑ ูุดุฑูุน Drone Academy
3. ุงูุชูู ุฅูู **Firestore Database**
4. ุงุจุญุซ ุนู collection `users`
5. ุงุฎุชุฑ ุงููุณุชุฎุฏู ุงููุทููุจ
6. ุนุฏูู ุญูู `role` ุฅูู `owner`
7. ุงุญูุธ ุงูุชุบููุฑุงุช

### ุงูุทุฑููุฉ 2: ุจุฑูุฌูุงู (ูููุทูุฑูู)

ูู ุจุฅุถุงูุฉ ูุฐุง ุงูููุฏ ูู ุฃู ููุงู ููุงุณุจ (ูุซูุงู ูู ุตูุญุฉ Admin Dashboard):

```dart
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_auth/firebase_auth.dart';

Future<void> makeCurrentUserOwner() async {
  final currentUser = FirebaseAuth.instance.currentUser;
  if (currentUser == null) return;
  
  await FirebaseFirestore.instance
      .collection('users')
      .doc(currentUser.uid)
      .update({'role': 'owner'});
      
  print('โ ุชู ุชุนููู ุงููุณุชุฎุฏู ูู Owner');
}
```

**ููุงุญุธุฉ:** ุงุญุฐู ูุฐุง ุงูููุฏ ุจุนุฏ ุชุนููู ุฃูู Owner ูุฃุณุจุงุจ ุฃูููุฉ!

### ุงูุทุฑููุฉ 3: ุนุจุฑ Firebase CLI

```bash
# ุชุซุจูุช Firebase CLI ุฅุฐุง ูู ููู ูุซุจุชุงู
npm install -g firebase-tools

# ุชุณุฌูู ุงูุฏุฎูู
firebase login

# ุชุดุบูู Cloud Function ูุชุนููู Owner
firebase functions:shell
> makeOwner('USER_UID_HERE')
```

---

## Firebase Remote Config Setup

ูุชูุนูู ููุฒุงุช ุงูุชุญูู ูู ุงูุชุทุจููุ ุฃุถู ูุฐู ุงูููุงุชูุญ ูู Remote Config:

### 1. forceUpdateVersion
- **ุงูููุน:** String
- **ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ:** `"1.0.0"`
- **ุงููุตู:** ุงูุญุฏ ุงูุฃุฏูู ูุฅุตุฏุงุฑ ุงูุชุทุจูู ุงููุทููุจ
- **ูุซุงู:** `"2.1.0"`

### 2. appEnabled
- **ุงูููุน:** Boolean
- **ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ:** `true`
- **ุงููุตู:** ุญุงูุฉ ุชุดุบูู ุงูุชุทุจูู
- **ุงูููู:**
  - `true`: ุงูุชุทุจูู ูุนูู
  - `false`: ุงูุชุทุจูู ูููู

---

## ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### Collection: users

```json
{
  "uid": "string",
  "displayName": "string",
  "email": "string",
  "photoUrl": "string?",
  "role": "owner | admin | manager | trainer | trainee | guest",
  "isBanned": "boolean"
}
```

---

## ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุญุต ุตูุงุญูุฉ Owner

```dart
final roleService = RoleService();
final isOwner = await roleService.isOwner();

if (isOwner) {
  // ุนุฑุถ ุงูููุฒุงุช ุงูุญุตุฑูุฉ
}
```

### ูุญุต ุตูุงุญูุฉ ูุญุฏุฏุฉ

```dart
final hasPermission = await roleService.hasPermission(
  Permission.EXPORT_BACKUP
);

if (hasPermission) {
  // ุชูููุฐ ุงูุนูููุฉ
}
```

### ุงูุญุตูู ุนูู ุฏูุฑ ุงููุณุชุฎุฏู

```dart
final role = await roleService.getCurrentUserRole();
print('User role: $role');
```

---

## ุงูุฃูุงู ๐

### ูุตุงุฆุญ ุฃูููุฉ ูููุฉ:

1. **ูููุฏ ุนุฏุฏ ุงูู Owners:**
   - ูููุถู ุฃู ูููู Owner ูุงุญุฏ ููุท
   - ุฃุถู Owner ุซุงูู ููุท ููุทูุงุฑุฆ

2. **ุฑุงุฌุน ุงูุตูุงุญูุงุช ุจุงูุชุธุงู:**
   - ุชุญูู ูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู ุฐูู ุงูุตูุงุญูุงุช ุงูุนุงููุฉ
   - ุงุญุฐู ุงูุตูุงุญูุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ

3. **ุงุณุชุฎุฏู Firestore Security Rules:**
   ```javascript
   match /users/{userId} {
     // ุงูุณูุงุญ ููู Owner ููุท ุจุชุนุฏูู ุงูุฃุฏูุงุฑ
     allow update: if request.auth != null && 
                   get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'owner';
   }
   ```

4. **ุณุฌูู ุงูุนูููุงุช ุงูุญุณุงุณุฉ:**
   - ุงุญุชูุธ ุจุณุฌู ูุนูููุงุช ุงูุญุธุฑ
   - ุณุฌูู ุชุบููุฑุงุช ุฅุตุฏุงุฑ ุงูุชุทุจูู
   - ุฑุงูุจ ุนูููุงุช ุชุตุฏูุฑ ุงูุจูุงูุงุช

---

## ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

### ุณ: ูุงุฐุง ูุญุฏุซ ุฅุฐุง ูู ููู ููุงู Ownerุ
**ุฌ:** ุงูููุฒุงุช ุงูุญุตุฑูุฉ ุณุชููู ูุนุทูุฉ ููุฌููุน ุญุชู ุชุนููู Owner.

### ุณ: ูู ูููู ุฃู ูููู ููุงู ุฃูุซุฑ ูู Ownerุ
**ุฌ:** ูุนูุ ุชูููุงู ูููู ุฐููุ ููู ูููุตุญ ุจุดุฏุฉ ุงูุญุฏ ูู ุนุฏุฏ ุงูู Owners ูุฃุณุจุงุจ ุฃูููุฉ.

### ุณ: ูู ูููู ููู Owner ุญุธุฑ ููุณูุ
**ุฌ:** ูุนูุ ูุฐูู ูู ุญุฐุฑุงู! ุชุฃูุฏ ูู ูุฌูุฏ Owner ุขุฎุฑ ูุจู ุงูููุงู ุจุนูููุงุช ุฎุทุฑุฉ.

### ุณ: ููู ุฃุนุฑู ูู ูู ุงูู Owner ุงูุญุงููุ
**ุฌ:** ุงุณุชุนูู ุนู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```dart
final owners = await FirebaseFirestore.instance
    .collection('users')
    .where('role', isEqualTo: 'owner')
    .get();
```

---

## ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

- [ ] ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูู ุฏุงุฎู ุงูุชุทุจูู
- [ ] ุณุฌู ุงูุนูููุงุช (Audit Log)
- [ ] ูุธุงู ุงูููุงููุงุช ููุนูููุงุช ุงูุญุณุงุณุฉ
- [ ] ุฅุดุนุงุฑุงุช ุนูุฏ ุชุบููุฑ ุงูุตูุงุญูุงุช
- [ ] ูุธุงู ุงูุฌูุณุงุช (Sessions) ูุชุชุจุน ุงููุดุงุท

---

## ุงูุฏุนู ุงูููู

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: support@droneacademy.com
- GitHub Issues: [drone_academy/issues](https://github.com/ShamiNet/drone_academy/issues)

---

**ุขุฎุฑ ุชุญุฏูุซ:** ููููุจุฑ 2025
**ุงูุฅุตุฏุงุฑ:** 1.0.0
